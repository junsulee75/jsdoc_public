<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/jsdoc_public/blog/rss.xml" title="Jun Su's technical notes (Public) Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/jsdoc_public/blog/atom.xml" title="Jun Su's technical notes (Public) Blog Atom Feed"><title data-react-helmet="true">MANAGING CONTAINER and KUBERNETES CLUSTER WITH IBM CLOUD | Jun Su&#x27;s technical notes (Public)</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="MANAGING CONTAINER and KUBERNETES CLUSTER WITH IBM CLOUD | Jun Su&#x27;s technical notes (Public)"><meta data-react-helmet="true" name="description" content="Migrating my old article written on Dec.13, 2018 from other blog sites."><meta data-react-helmet="true" property="og:description" content="Migrating my old article written on Dec.13, 2018 from other blog sites."><meta data-react-helmet="true" property="og:url" content="https://junsulee75.github.io/jsdoc_public/docs/"><link data-react-helmet="true" rel="shortcut icon" href="/jsdoc_public/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://junsulee75.github.io/jsdoc_public/docs/"><link rel="stylesheet" href="/jsdoc_public/styles.0cd6c135.css">
<link rel="preload" href="/jsdoc_public/styles.073e2aba.js" as="script">
<link rel="preload" href="/jsdoc_public/runtime~main.ad2a23af.js" as="script">
<link rel="preload" href="/jsdoc_public/main.157776f0.js" as="script">
<link rel="preload" href="/jsdoc_public/common.f3b9fc22.js" as="script">
<link rel="preload" href="/jsdoc_public/2.eb727179.js" as="script">
<link rel="preload" href="/jsdoc_public/36.80445d3b.js" as="script">
<link rel="preload" href="/jsdoc_public/935f2afb.23f3a75a.js" as="script">
<link rel="preload" href="/jsdoc_public/17896441.f5eef34b.js" as="script">
<link rel="preload" href="/jsdoc_public/f3c4f268.b947c1ab.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/jsdoc_public/"><img src="/jsdoc_public/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/jsdoc_public/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Jun Su&#x27;s notes(public) </strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/jsdoc_public/docs/">Docs</a><a class="navbar__item navbar__link" href="/jsdoc_public/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search searchBarContainer_1-U_"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_18Th searchBarLoadingRing_zYFK"><div></div><div></div><div></div><div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/jsdoc_public/"><img src="/jsdoc_public/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/jsdoc_public/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Jun Su&#x27;s notes(public) </strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/jsdoc_public/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/jsdoc_public/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Cloud</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/jsdoc_public/docs/">KUBERNETES ON IBM CLOUD hands on</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">MISC</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jsdoc_public/docs/docusaurus">Dacusaurus</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Docusaurus</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jsdoc_public/docs/doc1">Style Guide</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jsdoc_public/docs/doc2">Document Number 2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jsdoc_public/docs/doc3">This is Document Number 3</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Features</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/jsdoc_public/docs/mdx">Powered by MDX</a></li></ul></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">MANAGING CONTAINER and KUBERNETES CLUSTER WITH IBM CLOUD</h1></header><div class="markdown"><p>Migrating my old article written on Dec.13, 2018 from other blog sites.<br>
This is quite old doc but over streams remain similar.    </p><p>Recent few year&#x27;s technologies are moving faster than the things that had happened last 20 years.<br>
Among those, I am writing this page regarding how to start to create environment on your working laptop and interact with Kubernetes cluster in IBM cloud.<br>
Basically, the steps are followed by the course &quot;Container &amp; Kubernetes Essentials with IBM Cloud&quot;.<br>
I know these are basic stuffs.<br>
But during the hands on, I had few things that took my time to figure out some of trial and errors.<br>
Therefore I hope this page could be useful as a supplement document that saves your time in the same occurrences.  </p><p>Firstly, I think it&#x27;s better to share the example to create Kubenetes cluster environment in IBM Cloud<br>
and the steps to setup your laptop environment based on the access information to the created cluster.<br>
The overall steps would be conceptually similar to other clouds such as AWS and Google cloud.<br>
(Note : This is the 1st version of document and will be updated if things change. )     </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="1-create-kubenetes-cluster"></a>1. Create Kubenetes cluster.<a class="hash-link" href="#1-create-kubenetes-cluster" title="Direct link to heading">#</a></h2><p>Simpler than cooking an instant noodle.</p><p>Log in <a href="https://cloud.ibm.com" target="_blank" rel="noopener noreferrer">IBM Cloud</a>.<br>
From &#x27;Catalog&#x27; menu, choose &#x27;Kubernetes service&#x27;.
Then create the cluster giving the name.  ( &#x27;mycluster&#x27; in my example. )     </p><p><img alt="alt text" src="/jsdoc_public/assets/images/kubeibm1-608b0544556265c5d4bb1c11e13773fb.png" title="catalog page"></p><p>The screen during the deployment. ( It takes minutes. )</p><p><img alt="alt text" src="/jsdoc_public/assets/images/kubeibm2-d5c56ce2d433acb88e9e29c34799b52a.png" title="deployment"></p><p>Once it&#x27;s done, you will see this status that means your Kubenetes cluster is ready.   </p><p><img alt="alt text" src="/jsdoc_public/assets/images/kubeibm3-128ced5401c6105c5db491df6352e687.png" title="deployment"></p><p>When you click &#x27;Access&#x27; tab, you will see the brief steps/commands how you access the cluster from your laptop.<br>
I omit this as I will describe this later.<br>
Beforehand, you will need to install some software stacks.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-install-softwares-on-your-laptop"></a>2. Install softwares on your laptop.<a class="hash-link" href="#2-install-softwares-on-your-laptop" title="Direct link to heading">#</a></h2><p>In short, we need IBM cloud CLI ( command line interface ) and Kubernetes interface.<br>
I assume you already have at least Docker community edition installed in your laptop.<br>
You may refer the page <a href="https://cloud.ibm.com/docs/cli/index.html#overview" target="_blank" rel="noopener noreferrer">IBM Cloud CLI</a>, Version 0.5.0 or later for the detail.<br>
Regard &#x27;$&#x27; as the command prompt to run commands.   </p><p>The following commands install many relevant softwares and plug-in.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-1-install-ibm-cloud-cli"></a>2-1. Install IBM Cloud CLI<a class="hash-link" href="#2-1-install-ibm-cloud-cli" title="Direct link to heading">#</a></h3><p>After this you can use &#x27;ibmcloud&#x27; command.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ curl -sL https://ibm.biz/idt-installer| bash</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-2-ibm-cloud-kubernetes-service-plug-in"></a>2-2. IBM Cloud Kubernetes Service plug-in<a class="hash-link" href="#2-2-ibm-cloud-kubernetes-service-plug-in" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud plugin install container-service -r Bluemix</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-3-ibm-cloud-container-registry-plug-in"></a>2-3. IBM Cloud Container Registry plug-in<a class="hash-link" href="#2-3-ibm-cloud-container-registry-plug-in" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud plugin install container-registry -r Bluemix</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-4-check-installed-plugin-so-far"></a>2-4. Check installed plugin so far<a class="hash-link" href="#2-4-check-installed-plugin-so-far" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud plugin list</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">   Listing installed plug-ins...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Plugin Name                            Version   Status   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">cloud-functions/wsk/functions/fn       1.0.24       </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">container-registry                     0.1.341      </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">container-service/kubernetes-service   0.1.635      </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dev                                    2.1.8        </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">sdk-gen                                0.1.12  </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="2-5-install-kubenetes-cli-softwares--kubectl-"></a>2-5. Install Kubenetes CLI softwares ( &#x27;kubectl&#x27; )<a class="hash-link" href="#2-5-install-kubenetes-cli-softwares--kubectl-" title="Direct link to heading">#</a></h3><p>This is from Kubernetes web site and not IBM cloud dependant.</p><p>Refer to the page <a href="https://kubernetes.io/docs/tasks/tools/install-kubectl/" target="_blank" rel="noopener noreferrer">Kubernetes CLI</a>.
In short, only one command to install.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ brew install kubernetes-cli </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl version</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3-access-to-your-kubernetes-cluster"></a>3. Access to your Kubernetes cluster<a class="hash-link" href="#3-access-to-your-kubernetes-cluster" title="Direct link to heading">#</a></h2><p>When I created the cluster, it seems my cluster was located to Sydney region from the provided API point.<br>
By the way, I set up my access point and login.    </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3-1-login-with-the-provided-url-from-you-cluster-and-set-region-as-advised"></a>3-1. Login with the provided URL from you cluster and set region as advised.<a class="hash-link" href="#3-1-login-with-the-provided-url-from-you-cluster-and-set-region-as-advised" title="Direct link to heading">#</a></h3><p>Once it&#x27;s set once, you can use simple command <code>ibmcloud login</code> next time.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud login -a https://api.au-syd.bluemix.net</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">API endpoint: https://api.au-syd.bluemix.net</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Email&gt; junsulee@au1.ibm.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Password&gt;  &lt;== XXXXX</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Authenticating...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Targeted account JUN SU LEE&#x27;s Account (bf384e9f77ea0cd3b2268cbc7a1b8871)</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Targeted resource group default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                      </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">API endpoint:      https://api.au-syd.bluemix.net</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Region:            au-syd   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">User:              junsulee@au1.ibm.com</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Account:           JUN SU LEE&#x27;s Account (bf384e9f77ea0cd3b2268cbc7a1b8871)   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Resource group:    default   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">CF API endpoint:      </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Org:                  </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Space:                </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud cs region-set ap-south</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3-2-download-kubenetes-cluster-configuration-file"></a>3-2. Download Kubenetes cluster configuration file.<a class="hash-link" href="#3-2-download-kubenetes-cluster-configuration-file" title="Direct link to heading">#</a></h3><p>This will download and show the yaml file path with export command to set the client working environment.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud cs cluster-config mycluster</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The configuration for mycluster was downloaded successfully.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Export environment variables to start using Kubernetes.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">export KUBECONFIG=/Users/kr050496/.bluemix/plugins/container-service/clusters/mycluster/kube-config-mel01-mycluster.yml</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="3-3-set-kubeconfig-environment-and-confirm-if-you-can-get-the-kubenetes-node-name"></a>3-3. Set &#x27;KUBECONFIG&#x27; environment and confirm if you can get the Kubenetes node name.<a class="hash-link" href="#3-3-set-kubeconfig-environment-and-confirm-if-you-can-get-the-kubenetes-node-name" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ export KUBECONFIG=/Users/kr050496/.bluemix/plugins/container-service/clusters/mycluster/kube-config-mel01-mycluster.yml</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl get nodes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME            STATUS   ROLES    AGE   VERSION</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">10.118.181.83   Ready    &lt;none&gt;   9d    v1.10.8+IKS</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4-push-an-docker-image-to-ibm-cloud-container-registry"></a>4. Push an Docker Image to IBM Cloud container registry<a class="hash-link" href="#4-push-an-docker-image-to-ibm-cloud-container-registry" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4-1-need-to-login-container-registry"></a>4-1. Need to login container registry<a class="hash-link" href="#4-1-need-to-login-container-registry" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">    $ ibmcloud cr login</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4-2-create-your-name-space-for-uploading-the-image"></a>4-2. Create your name space for uploading the image.<a class="hash-link" href="#4-2-create-your-name-space-for-uploading-the-image" title="Direct link to heading">#</a></h3><p>I used &#x27;js_namespace&#x27; here.   </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud cr namespace-add js_namespace</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4-3-build-a-docker-image"></a>4-3. Build a Docker image.<a class="hash-link" href="#4-3-build-a-docker-image" title="Direct link to heading">#</a></h3><p>This could be any Docker image you have.<br>
Here, I just used popular &#x27;hello-world&#x27; app docker source files.<br>
You can download the files from this github page.   </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker build --tag registry.au-syd.bluemix.net/js_namespace/hello-world .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker images</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">REPOSITORY                                             TAG                 IMAGE ID            CREATED             SIZE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">registry.au-syd.bluemix.net/js_namespace/hello-world   latest              c8d3ce58b2f0        3 minutes ago       77.4MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node                                                   9.4.0-alpine        b5f94997f35f        10 months ago       68MB</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="4-4-push-the-docker-image-to-container-registry-of-your-ibm-cloud"></a>4-4. Push the Docker image to container registry of your IBM cloud.<a class="hash-link" href="#4-4-push-the-docker-image-to-container-registry-of-your-ibm-cloud" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker push registry.au-syd.bluemix.net/js_namespace/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The push refers to repository [registry.au-syd.bluemix.net/js_namespace/hello-world]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dfed013c3a66: Pushed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">43c75a864aef: Pushed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a5e384757789: Pushed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0804854a4553: Pushed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">6bd4a62f5178: Pushed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">9dfa40a0da3b: Pushed</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">latest: digest: sha256:03555979df6473d6bac5bd96aa567b732f5812bcec21d7849fd0a8df0d5260e4 size: 1576</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-deploy-the-application-to-your-kubernetes-cluster"></a>5. Deploy the application to your Kubernetes cluster<a class="hash-link" href="#5-deploy-the-application-to-your-kubernetes-cluster" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-1-make-sure-kubernetes-cluster-is-ready"></a>5-1. Make sure Kubernetes cluster is ready.<a class="hash-link" href="#5-1-make-sure-kubernetes-cluster-is-ready" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud cs clusters</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Name        ID                                 State    Created      Workers   Location   Version       Resource Group Name   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">mycluster   fc8d5b31551f40c393bb55dfbc7dacf1   normal   1 week ago   1         mel01      1.10.8_1530   default</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-2-run-the-image-as-a-deployment"></a>5-2. Run the image as a deployment<a class="hash-link" href="#5-2-run-the-image-as-a-deployment" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl run hello-world--image=registry.au-syd.bluemix.net/js_namespace/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kubectl run --generator=deployment/apps.v1beta1 is DEPRECATED and will be removed in a future version. Use kubectl create instead.</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.apps/hello-world created</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-3-check-if-the-deployed-application-is-running"></a>5-3. Check if the deployed application is running.<a class="hash-link" href="#5-3-check-if-the-deployed-application-is-running" title="Direct link to heading">#</a></h3><p>( <code>Pods</code> is a kind of real running instance of the application image. )</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl get pods</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-tw69g   1/1     Running   0          1m</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-4-expose-that-deployment-as-a-service-which-is-accessed-through-the-ip-of-the-worker-nodes"></a>5-4. Expose that deployment as a service, which is accessed through the IP of the worker nodes.<a class="hash-link" href="#5-4-expose-that-deployment-as-a-service-which-is-accessed-through-the-ip-of-the-worker-nodes" title="Direct link to heading">#</a></h3><p>The example for this lab listens on port 8080. Run this command:    </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl expose deployment/hello-world --type=&quot;NodePort&quot; --port=8080</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">service/hello-world exposed</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-5-find-the-port-that-is-used-on-that-worker-node-and-examine-your-new-service"></a>5-5. Find the port that is used on that worker node and examine your new service<a class="hash-link" href="#5-5-find-the-port-that-is-used-on-that-worker-node-and-examine-your-new-service" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl describe service hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Name:                     hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Namespace:                default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Labels:                   run=hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Annotations:              &lt;none&gt;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Selector:                 run=hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Type:                     NodePort</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">IP:                       172.21.221.176</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Port:                     &lt;unset&gt;  8080/TCP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">TargetPort:               8080/TCP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NodePort:                 &lt;unset&gt;  32115/TCP</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Endpoints:                172.30.209.7:8080</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Session Affinity:         None</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">External Traffic Policy:  Cluster</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Events:                   &lt;none&gt;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-6-find-public-ip"></a>5-6. Find public IP<a class="hash-link" href="#5-6-find-public-ip" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ ibmcloud cs workers mycluster</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">OK</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">ID                                                 Public IP       Private IP      Machine Type   State    Status   Zone    Version   </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kube-mel01-pafc8d5b31551f40c393bb55dfbc7dacf1-w1   168.1.144.249   10.118.181.83   free           normal   Ready    mel01   1.10.8_1531*   </span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="5-7-run-application"></a>5-7. Run application<a class="hash-link" href="#5-7-run-application" title="Direct link to heading">#</a></h3><p>(CLI example)</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ curl 168.1.144.249:32115</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Hello world from hello-world-b5f57696-tw69g! Your app is up and running in a cluster!</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>(From Web browser),</p><p><img alt="alt text" src="/jsdoc_public/assets/images/kubeibm1-608b0544556265c5d4bb1c11e13773fb.png" title="catalog page"> </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6-scale-apps-with-replicas"></a>6. Scale apps with replicas<a class="hash-link" href="#6-scale-apps-with-replicas" title="Direct link to heading">#</a></h2><p>Now, we about about to test replicating the applications that is one of main reason using Kubernetes.<br>
This is how it looks like.   </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6-1-edit-the-application-profile-to-have-multiple-replicas"></a>6-1. Edit the application profile to have multiple replicas.<a class="hash-link" href="#6-1-edit-the-application-profile-to-have-multiple-replicas" title="Direct link to heading">#</a></h3><p>This command opens editor like vi.    </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl edit deployment/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">apiVersion: extensions/v1beta1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">kind: Deployment</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">metadata:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  annotations:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    deployment.kubernetes.io/revision: &quot;1&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  creationTimestamp: 2018-12-02T08:12:32Z</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  generation: 1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  labels:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    run: hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  name: hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  namespace: default</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  resourceVersion: &quot;89518&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  selfLink: /apis/extensions/v1beta1/namespaces/default/deployments/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  uid: 0500e431-f60a-11e8-a202-96b9c26aee95</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  progressDeadlineSeconds: 600</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  replicas: 1                 &lt;== change this line from 1 to 10</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>If you save by <code>wq:</code>, it shows the following message.      </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">&quot;/private/var/folders/3s/twhgptds155072zvjvs4q8j40000gn/T/kubectl-edit-ixhu1.yaml&quot; 67L, 1935C written</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.extensions/hello-world edited</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="6-2-now-check-the-application-status-again"></a>6-2. Now, check the application status again.<a class="hash-link" href="#6-2-now-check-the-application-status-again" title="Direct link to heading">#</a></h3><p>Then you will see 10 Pods are running as we changed.<br>
( It may take seconds until you see the output similar to this. )       </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl rollout status deployment/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment &quot;hello-world&quot; successfully rolled out</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl get pods</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                         READY   STATUS    RESTARTS   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-2gwkp   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-2vb6x   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-86bdz   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-9xcss   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-g96sw   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-hvd2f   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-jncsm   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-mdnkw   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-tc6k5   1/1     Running   0          2m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696-tw69g   1/1     Running   0          19m</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7-update-and-rollback-apps"></a>7. Update and rollback apps<a class="hash-link" href="#7-update-and-rollback-apps" title="Direct link to heading">#</a></h2><p>Kubernetes allows you to use a rollout to update an app deployment with a new Docker image.<br>
This allows you to easily update the running image and also allows you to easily undo a rollout if a problem is discovered after deployment.     </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7-1--building-new-docker-image-and-push-to-ibm-cloud-container-registry"></a>7-1.  Building new docker image and push to IBM cloud container registry.<a class="hash-link" href="#7-1--building-new-docker-image-and-push-to-ibm-cloud-container-registry" title="Direct link to heading">#</a></h3><p>Let me build two more docker images tagging &quot;:1&quot; and &quot;:2&quot; to differentiate from the previous version.<br>
This is actually same build but I will pretend these are different version just for demonstration purpose.     </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker build --tag registry.au-syd.bluemix.net/js_namespace/hello-world:1 .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Sending build context to Docker daemon  15.36kB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 1/6 : FROM node:9.4.0-alpine</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; b5f94997f35f</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 2/6 : COPY app.js .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; 0bdfcf16e9c0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 3/6 : COPY package.json .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; b7a6a0b93944</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 4/6 : RUN npm install &amp;&amp;    apk update &amp;&amp;    apk upgrade</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; 4c0b6dad22d4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 5/6 : EXPOSE  8080</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; bda855584f19</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 6/6 : CMD node app.js</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; c8d3ce58b2f0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully built c8d3ce58b2f0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully tagged registry.au-syd.bluemix.net/js_namespace/hello-world:1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now, you see one more build.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker images</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">REPOSITORY                                             TAG                 IMAGE ID            CREATED             SIZE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">registry.au-syd.bluemix.net/js_namespace/hello-world   1                   c8d3ce58b2f0        4 hours ago         77.4MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">registry.au-syd.bluemix.net/js_namespace/hello-world   latest              c8d3ce58b2f0        4 hours ago         77.4MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node                                                   9.4.0-alpine        b5f94997f35f        10 months ago       68MB</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Then, I will push this new image to IBM cloud container registry.     </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker push registry.au-syd.bluemix.net/js_namespace/hello-world:1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The push refers to repository [registry.au-syd.bluemix.net/js_namespace/hello-world]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dfed013c3a66: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">43c75a864aef: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a5e384757789: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0804854a4553: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">6bd4a62f5178: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">9dfa40a0da3b: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">1: digest: sha256:03555979df6473d6bac5bd96aa567b732f5812bcec21d7849fd0a8df0d5260e4 size: 1576</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>In the same way, let me build one more version tagging as &quot;:2&quot;.<br>
Finally, I will use this for the test.      </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker build --tag registry.au-syd.bluemix.net/js_namespace/hello-world:2 .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Sending build context to Docker daemon  15.36kB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 1/6 : FROM node:9.4.0-alpine</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; b5f94997f35f</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 2/6 : COPY app.js .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; 0bdfcf16e9c0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 3/6 : COPY package.json .</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; b7a6a0b93944</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 4/6 : RUN npm install &amp;&amp;    apk update &amp;&amp;    apk upgrade</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; 4c0b6dad22d4</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 5/6 : EXPOSE  8080</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; bda855584f19</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Step 6/6 : CMD node app.js</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; Using cache</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">---&gt; c8d3ce58b2f0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully built c8d3ce58b2f0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully tagged registry.au-syd.bluemix.net/js_namespace/hello-world:2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker images</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">REPOSITORY                                             TAG                 IMAGE ID            CREATED             SIZE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">registry.au-syd.bluemix.net/js_namespace/hello-world   1                   c8d3ce58b2f0        4 hours ago         77.4MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">registry.au-syd.bluemix.net/js_namespace/hello-world   2                   c8d3ce58b2f0        4 hours ago         77.4MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">registry.au-syd.bluemix.net/js_namespace/hello-world   latest              c8d3ce58b2f0        4 hours ago         77.4MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">node                                                   9.4.0-alpine        b5f94997f35f        10 months ago       68MB</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ docker push registry.au-syd.bluemix.net/js_namespace/hello-world:2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">The push refers to repository [registry.au-syd.bluemix.net/js_namespace/hello-world]</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">dfed013c3a66: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">43c75a864aef: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a5e384757789: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">0804854a4553: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">6bd4a62f5178: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">9dfa40a0da3b: Layer already exists</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">2: digest: sha256:03555979df6473d6bac5bd96aa567b732f5812bcec21d7849fd0a8df0d5260e4 size: 1576</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7-2--roll-out-new-image-to-kubenetes-cluster"></a>7-2.  Roll out new image to Kubenetes cluster.<a class="hash-link" href="#7-2--roll-out-new-image-to-kubenetes-cluster" title="Direct link to heading">#</a></h3><p>So far, I have only pushed this image into the container registry only but didn&#x27;t roll out to Kubenetes service cluster.     </p><p>To apply new image, there are two ways.    </p><p>(1) Edit the Kubenetes application profile and save. ( Edit the image name line )    </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl edit deployment/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    spec:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">      containers:</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">     - image: registry.au-syd.bluemix.net/js_namespace/hello-world:2</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>(2) By commands.</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl set image deployment/hello-world hello-world=registry.au-syd.bluemix.net/js_namespace/hello-world:2</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.extensions/hello-world image updated</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">..</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl rollout status deployment/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment &quot;hello-world&quot; successfully rolled out</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Can you guess what would happen then ?<br>
Yes, the existing replicasets moved to sets with new image.<br>
I hoped to capture the progress of the movement but it was too fast, so I show the result output after the movement.     </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   10        10        10      1m    &lt;= new</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     0         0         0       34m   &lt;= old</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7-3--roll-out-new-image-to-kubenetes-cluster"></a>7-3.  Roll out new image to Kubenetes cluster.<a class="hash-link" href="#7-3--roll-out-new-image-to-kubenetes-cluster" title="Direct link to heading">#</a></h3><p>Running the application confirms we are running on the new image.     </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ curl 168.1.144.249:32115</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">Hello world from hello-world-854fc7484d-qnxf8! Your app is up and running in a cluster!</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="7-4-roll-back-apps"></a>7-4. Roll back apps<a class="hash-link" href="#7-4-roll-back-apps" title="Direct link to heading">#</a></h3><p>Let&#x27;s assume the scenario that something goes wrong with new apps image.<br>
Here, one single quick command to rollback the change.<br>
At this time, I am more prepared to run the command in shorter interval to show the progress.    </p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-undefined codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">$ kubectl rollout undo deployment/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">deployment.extensions/hello-world</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jsmacpro15retina:Lab 1 kr050496$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   6         6         6       3m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     7         7         2       36m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jsmacpro15retina:Lab 1 kr050496$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   4         4         4       3m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     9         9         4       37m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jsmacpro15retina:Lab 1 kr050496$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   4         4         4       3m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     9         9         4       37m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jsmacpro15retina:Lab 1 kr050496$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   4         4         4       4m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     9         9         4       37m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jsmacpro15retina:Lab 1 kr050496$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   2         2         2       4m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     10        10        6       37m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jsmacpro15retina:Lab 1 kr050496$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   2         2         2       4m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     10        10        7       37m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jsmacpro15retina:Lab 1 kr050496$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   0         0         0       4m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     10        10        8       37m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">jsmacpro15retina:Lab 1 kr050496$ kubectl get replicasets</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">NAME                     DESIRED   CURRENT   READY   AGE</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-854fc7484d   0         0         0       4m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">hello-world-b5f57696     10        10        10      37m</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>Now we went back to the previous image running mode.<br>
Thank you for reading this.     </p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/kubeibm.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/jsdoc_public/docs/docusaurus"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Setting up Docusaurus Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#1-create-kubenetes-cluster" class="table-of-contents__link">1. Create Kubenetes cluster.</a></li><li><a href="#2-install-softwares-on-your-laptop" class="table-of-contents__link">2. Install softwares on your laptop.</a><ul><li><a href="#2-1-install-ibm-cloud-cli" class="table-of-contents__link">2-1. Install IBM Cloud CLI</a></li><li><a href="#2-2-ibm-cloud-kubernetes-service-plug-in" class="table-of-contents__link">2-2. IBM Cloud Kubernetes Service plug-in</a></li><li><a href="#2-3-ibm-cloud-container-registry-plug-in" class="table-of-contents__link">2-3. IBM Cloud Container Registry plug-in</a></li><li><a href="#2-4-check-installed-plugin-so-far" class="table-of-contents__link">2-4. Check installed plugin so far</a></li><li><a href="#2-5-install-kubenetes-cli-softwares--kubectl-" class="table-of-contents__link">2-5. Install Kubenetes CLI softwares ( &#39;kubectl&#39; )</a></li></ul></li><li><a href="#3-access-to-your-kubernetes-cluster" class="table-of-contents__link">3. Access to your Kubernetes cluster</a><ul><li><a href="#3-1-login-with-the-provided-url-from-you-cluster-and-set-region-as-advised" class="table-of-contents__link">3-1. Login with the provided URL from you cluster and set region as advised.</a></li><li><a href="#3-2-download-kubenetes-cluster-configuration-file" class="table-of-contents__link">3-2. Download Kubenetes cluster configuration file.</a></li><li><a href="#3-3-set-kubeconfig-environment-and-confirm-if-you-can-get-the-kubenetes-node-name" class="table-of-contents__link">3-3. Set &#39;KUBECONFIG&#39; environment and confirm if you can get the Kubenetes node name.</a></li></ul></li><li><a href="#4-push-an-docker-image-to-ibm-cloud-container-registry" class="table-of-contents__link">4. Push an Docker Image to IBM Cloud container registry</a><ul><li><a href="#4-1-need-to-login-container-registry" class="table-of-contents__link">4-1. Need to login container registry</a></li><li><a href="#4-2-create-your-name-space-for-uploading-the-image" class="table-of-contents__link">4-2. Create your name space for uploading the image.</a></li><li><a href="#4-3-build-a-docker-image" class="table-of-contents__link">4-3. Build a Docker image.</a></li><li><a href="#4-4-push-the-docker-image-to-container-registry-of-your-ibm-cloud" class="table-of-contents__link">4-4. Push the Docker image to container registry of your IBM cloud.</a></li></ul></li><li><a href="#5-deploy-the-application-to-your-kubernetes-cluster" class="table-of-contents__link">5. Deploy the application to your Kubernetes cluster</a><ul><li><a href="#5-1-make-sure-kubernetes-cluster-is-ready" class="table-of-contents__link">5-1. Make sure Kubernetes cluster is ready.</a></li><li><a href="#5-2-run-the-image-as-a-deployment" class="table-of-contents__link">5-2. Run the image as a deployment</a></li><li><a href="#5-3-check-if-the-deployed-application-is-running" class="table-of-contents__link">5-3. Check if the deployed application is running.</a></li><li><a href="#5-4-expose-that-deployment-as-a-service-which-is-accessed-through-the-ip-of-the-worker-nodes" class="table-of-contents__link">5-4. Expose that deployment as a service, which is accessed through the IP of the worker nodes.</a></li><li><a href="#5-5-find-the-port-that-is-used-on-that-worker-node-and-examine-your-new-service" class="table-of-contents__link">5-5. Find the port that is used on that worker node and examine your new service</a></li><li><a href="#5-6-find-public-ip" class="table-of-contents__link">5-6. Find public IP</a></li><li><a href="#5-7-run-application" class="table-of-contents__link">5-7. Run application</a></li></ul></li><li><a href="#6-scale-apps-with-replicas" class="table-of-contents__link">6. Scale apps with replicas</a><ul><li><a href="#6-1-edit-the-application-profile-to-have-multiple-replicas" class="table-of-contents__link">6-1. Edit the application profile to have multiple replicas.</a></li><li><a href="#6-2-now-check-the-application-status-again" class="table-of-contents__link">6-2. Now, check the application status again.</a></li></ul></li><li><a href="#7-update-and-rollback-apps" class="table-of-contents__link">7. Update and rollback apps</a><ul><li><a href="#7-1--building-new-docker-image-and-push-to-ibm-cloud-container-registry" class="table-of-contents__link">7-1.  Building new docker image and push to IBM cloud container registry.</a></li><li><a href="#7-2--roll-out-new-image-to-kubenetes-cluster" class="table-of-contents__link">7-2.  Roll out new image to Kubenetes cluster.</a></li><li><a href="#7-3--roll-out-new-image-to-kubenetes-cluster" class="table-of-contents__link">7-3.  Roll out new image to Kubenetes cluster.</a></li><li><a href="#7-4-roll-back-apps" class="table-of-contents__link">7-4. Roll back apps</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/jsdoc_public/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/jsdoc_public/docs/doc2/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/jsdoc_public/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/jsdoc_public/styles.073e2aba.js"></script>
<script src="/jsdoc_public/runtime~main.ad2a23af.js"></script>
<script src="/jsdoc_public/main.157776f0.js"></script>
<script src="/jsdoc_public/common.f3b9fc22.js"></script>
<script src="/jsdoc_public/2.eb727179.js"></script>
<script src="/jsdoc_public/36.80445d3b.js"></script>
<script src="/jsdoc_public/935f2afb.23f3a75a.js"></script>
<script src="/jsdoc_public/17896441.f5eef34b.js"></script>
<script src="/jsdoc_public/f3c4f268.b947c1ab.js"></script>
</body>
</html>